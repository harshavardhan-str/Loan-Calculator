<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loan Tenure & Amortization Calculator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
  <div class="app-container">
    <header class="app-header">
      <h1>Loan Calculator</h1>
      <p class="subtitle">Plan your financial future with precision</p>
    </header>

    <main class="dashboard">
      <!-- Input Section -->
      <section class="panel input-panel">
        <h2><i class="ph ph-sliders-horizontal"></i> Loan Details</h2>
        <form id="loan-form">
          <div class="form-group">
            <label for="loan-amount">Loan Amount (P)</label>
            <div class="input-wrapper">
              <input type="number" id="loan-amount" placeholder="e.g. 1000000" min="0" required>
              <select id="currency">
                <option value="USD">USD ($)</option>
                <option value="EUR">EUR (€)</option>
                <option value="INR">INR (₹)</option>
                <option value="GBP">GBP (£)</option>
                <option value="AUD">AUD (A$)</option>
                <option value="CAD">CAD (C$)</option>
                <option value="AED">AED (د.إ)</option>
                <option value="CNY">CNY (¥)</option>
                <option value="JPY">JPY (¥)</option>
                <option value="SEK">SEK (kr)</option>
                <option value="RUB">RUB (₽)</option>
                <!-- European -->
                <option value="CHF">CHF (Fr)</option>
                <option value="NOK">NOK (kr)</option>
                <option value="DKK">DKK (kr)</option>
                <option value="PLN">PLN (zł)</option>
                <!-- South American -->
                <option value="BRL">BRL (R$)</option>
                <option value="ARS">ARS ($)</option>
                <option value="COP">COP ($)</option>
                <option value="CLP">CLP ($)</option>
                <option value="PEN">PEN (S/)</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="interest-rate">Annual Interest Rate (%)</label>
              <input type="number" id="interest-rate" placeholder="e.g. 8.5" step="0.01" min="0" required>
            </div>
            <div class="form-group">
              <label for="loan-duration">Duration (Years)</label>
              <input type="number" id="loan-duration" placeholder="e.g. 20" min="0.1" step="0.1" required>
            </div>
          </div>

          <div class="form-group">
            <label for="start-date">Loan Start Date</label>
            <input type="date" id="start-date" required>
          </div>

          <!-- Bulk Payments Module -->
          <div class="bulk-payments-section">
            <div class="section-header">
              <h3>Bulk Principal Payments</h3>
              <button type="button" id="add-payment-btn" class="btn-small"><i class="ph ph-plus"></i> Add
                Payment</button>
            </div>
            <div id="payment-list" class="bulk-list">
              <!-- Dynamic Payment Rows -->
            </div>
          </div>

          <!-- Rate Changes Module -->
          <div class="bulk-payments-section" style="margin-top: 1.5rem;">
            <div class="section-header">
              <h3>Interest Rate Changes</h3>
              <button type="button" id="add-rate-btn" class="btn-small"><i class="ph ph-plus"></i> Add Rate
                Change</button>
            </div>
            <div id="rate-list" class="bulk-list">
              <!-- Dynamic Rate Rows -->
            </div>
          </div>

          <button type="submit" class="calculate-btn">Calculate Amortization</button>
        </form>
      </section>

      <!-- Results Section -->
      <section class="results-container">
        <!-- Summary Cards -->
        <div class="summary-grid">
          <div class="card summary-card" id="card-emi">
            <span class="card-label">Monthly EMI</span>
            <h3 class="card-value" id="val-emi">-</h3>
            <p class="card-sub">Initial amount</p>
          </div>
          <div class="card summary-card" id="card-interest">
            <span class="card-label">Total Interest</span>
            <h3 class="card-value" id="val-total-interest">-</h3>
          </div>
          <div class="card summary-card" id="card-total">
            <span class="card-label">Total Payment</span>
            <h3 class="card-value" id="val-total-payment">-</h3>
            <p class="card-sub">Principal + Interest</p>
          </div>
          <div class="card summary-card" id="card-date">
            <span class="card-label">Closure Date</span>
            <h3 class="card-value" id="val-closure-date">-</h3>
          </div>
        </div>

        <!-- Chart Area -->
        <div class="panel chart-panel">
          <h3>Payment Breakdown</h3>
          <div class="chart-wrapper">
            <canvas id="loanChart"></canvas>
          </div>
        </div>
      </section>
    </main>

    <!-- Amortization Table -->
    <section class="panel table-panel">
      <div class="table-header-row">
        <h3>Amortization Schedule</h3>
        <div class="export-actions">
          <button id="btn-export-pdf" class="btn-secondary" title="Export to PDF"><i class="ph ph-file-pdf"></i>
            PDF</button>
          <button id="btn-export-excel" class="btn-secondary" title="Export to Excel"><i class="ph ph-file-xls"></i>
            Excel</button>
        </div>
      </div>
      <div class="table-responsive">
        <table id="amortization-table">
          <thead>
            <tr>
              <th>Month</th>
              <th>Date</th>
              <th class="text-right">EMI</th>
              <th>Principal</th>
              <th class="text-right">Rate (%)</th>
              <th class="text-right">Interest</th>
              <th class="text-right">Bulk Payment</th>
              <th class="text-right">Balance</th>
            </tr>
          </thead>
          <tbody>
            <!-- Rows generated via JS -->
          </tbody>
        </table>
      </div>
    </section>
  </div>
  <script type="module" src="/main.js"></script>
</body>

</html>