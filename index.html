<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loan Tenure & Amortization Calculator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
  <div class="app-container">
    <header class="app-header">
      <h1>Loan Calculator</h1>
      <p class="subtitle">Plan your financial future with precision</p>
    </header>

    <main class="main-content">
      <!-- Input Section -->
      <section class="panel input-panel">
        <div class="panel-header">
          <h2><i class="ph ph-sliders-horizontal"></i> Loan Details</h2>
        </div>
        <form id="loan-form">
          <div class="form-grid-3">
            <div class="form-group">
              <label for="loan-amount">Loan Amount</label>
              <div class="input-wrapper">
                <span class="currency-symbol"></span>
                <input type="number" id="loan-amount" placeholder="e.g. 1000000" min="0" required>
                <select id="currency" class="currency-select-compact">
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="INR">INR</option>
                  <option value="GBP">GBP</option>
                  <option value="AUD">AUD</option>
                  <option value="CAD">CAD</option>
                  <option value="AED">AED</option>
                  <option value="CNY">CNY</option>
                  <option value="JPY">JPY</option>
                  <!-- More options can be added, kept compact for now -->
                  <option value="BRL">BRL</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="interest-rate">Interest Rate (%)</label>
              <input type="number" id="interest-rate" placeholder="e.g. 8.5" step="0.01" min="0" required>
            </div>

            <div class="form-group">
              <label for="loan-duration">Duration (Years)</label>
              <input type="number" id="loan-duration" placeholder="e.g. 20" min="0.1" step="0.1" required>
            </div>
          </div>

          <div class="form-grid-2">
            <div class="form-group">
              <label for="start-date">Start Date</label>
              <input type="date" id="start-date" required>
            </div>
            <!-- Spacer or extra field if needed -->
          </div>

          <!-- Advanced Toggle / Bulk Section -->
          <div class="bulk-payments-wrapper">
            <div class="bulk-row-container">
              <div class="bulk-module">
                <div class="module-header">
                  <h3>Extra Principal Payments</h3>
                  <button type="button" id="add-payment-btn" class="btn-text"><i class="ph ph-plus-circle"></i>
                    Add</button>
                </div>
                <div id="payment-list" class="bulk-list"></div>
              </div>

              <div class="bulk-module">
                <div class="module-header">
                  <h3>Interest Rate Changes</h3>
                  <button type="button" id="add-rate-btn" class="btn-text"><i class="ph ph-plus-circle"></i>
                    Add</button>
                </div>
                <div id="rate-list" class="bulk-list"></div>
              </div>
            </div>
          </div>

          <button type="submit" class="calculate-btn">Calculate Loan</button>
        </form>
      </section>

      <!-- Results Section -->
      <section class="results-container">
        <!-- Summary Cards -->
        <div class="summary-cards">
          <div class="summary-card primary-card">
            <span class="label">Monthly Payment</span>
            <h2 class="value" id="val-emi">-</h2>
            <span class="sub-label">EMI</span>
          </div>

          <div class="summary-card">
            <span class="label">Total Interest</span>
            <h3 class="value" id="val-total-interest">-</h3>
          </div>

          <div class="summary-card">
            <span class="label">Total Amount</span>
            <h3 class="value" id="val-total-payment">-</h3>
          </div>

          <div class="summary-card">
            <span class="label">Payoff Date</span>
            <h3 class="value" id="val-closure-date">-</h3>
          </div>
        </div>

        <!-- Chart Area -->
        <div class="panel chart-panel">
          <h3>Balance & Interest Projection</h3>
          <div class="chart-wrapper">
            <canvas id="loanChart"></canvas>
          </div>
        </div>
      </section>

      <!-- Amortization Table -->
      <section class="panel table-panel">
        <div class="table-header-row">
          <h3>Amortization Schedule</h3>
          <div class="export-actions">
            <button id="btn-export-pdf" class="btn-secondary" title="Export to PDF"><i class="ph ph-file-pdf"></i>
              PDF</button>
            <button id="btn-export-excel" class="btn-secondary" title="Export to Excel"><i class="ph ph-file-xls"></i>
              Excel</button>
          </div>
        </div>
        <div class="table-responsive">
          <table id="amortization-table">
            <thead>
              <tr>
                <th>Month</th>
                <th>Date</th>
                <th class="text-right">EMI</th>
                <th>Principal</th>
                <th class="text-right">Rate (%)</th>
                <th class="text-right">Interest</th>
                <th class="text-right">Bulk Payment</th>
                <th class="text-right">Balance</th>
              </tr>
            </thead>
            <tbody>
              <!-- Rows generated via JS -->
            </tbody>
          </table>
        </div>
      </section>
  </div>
  <script type="module" src="/main.js"></script>
</body>

</html>